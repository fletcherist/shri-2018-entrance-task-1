# Приложение для создания и редактирования информации о встречах сотрудников

Пройдёмся по ошибкам:

## Ошибка 1

**[Фикс инициализации Sequelize](https://github.com/fletcherist/shri-2018-entrance-task-1/commit/116f0e593c8ce4a9a336a7f80ebe389e64b63acc#diff-18c449caa39363f82bacb4f7489e7783R4)**

Node-приложение не запускалось, потому что была неправильно был инициализирован модуль для работы с `sqlite`. Там были пропущены несколько аргументов, передаваемые в функцию-конструктор (логин и пароль к базе, соответственно)

## Ошибка 2

**[Фикс в резолверах](https://github.com/fletcherist/shri-2018-entrance-task-1/blob/master/graphql/resolvers/index.js#L15)**

В ивентах не получались список пользователей и заброннированная комната, потому что метод резолвера ничего не возвращал

## Ошибка 3

**[Фикс Arguments при вызове метода модели ивентов](https://github.com/fletcherist/shri-2018-entrance-task-1/blob/master/graphql/resolvers/query.js#L7)**

Собственно, все ивенты не получались, потому что в метод `findAll` передавался массивоподобный объект `arguments`, которой в данном случае состоял из `(root, args, context)`, вместо `args`

## Ошибка 4

**[Фикс лишнего оффсета для комнат](https://github.com/fletcherist/shri-2018-entrance-task-1/blob/master/graphql/resolvers/query.js#L22)**

Опять же методу `findAll` модели комнат передавался лишний параметр `offset`, который в данном случае про то, чтобы вернуть все комнаты, начиная с первой — здесь он совершенно не нужен.


## Поле Username в таблице
Я также добавил в схему поле `username` с именами пользователей, поскольку его не было, а были только логины.


<img height=300 src='https://pp.userapi.com/c840620/v840620100/448b8/M5rJ6JwKhCQ.jpg'/>


## Мокаем данные
Я попробовал сделать диаграмму, максимально похожую на макет. Конечно, в жизни едва ли когда-нибудь такая получится, потому что там бронируется с 15-минутными интервалами, да и пустых мест будет меньше.

<img height=300 src='https://pp.userapi.com/c840620/v840620100/448f0/EK_CloNPHDs.jpg'/>


Данные мокались на месяц вперёд, с расчётом на то, чтобы вы зашли там, скажем, в конце января и не увидели пустое расписание.


**[Коммит, где мокаем данные](https://github.com/fletcherist/shri-2018-entrance-task-1/commit/d1c032f29ab6756076ee69a9a9cd049ad4dfaffe#diff-329d3df6b8b3e1e2cdf0937013f7e7d4R3)**


## Рефакторинг

Прошёлся вместе с `eslint` по всем файлам и исправил `trailing-spaces`, `wrong indentation` и тому подобное (в соответствии с моим конфигом).

## Деплой
Следующим логичным шагом стал деплой приложения на **Heroku**


https://yandex-rooms-graphql.herokuapp.com/


С самого начала я хотел раздеплоить третье задание на `gh-pages`, поэтому мне понадобась поддержка кроссдоменных запросов.

**[Коммит с поддержкой CORS](https://github.com/fletcherist/shri-2018-entrance-task-1/commit/a51bcf524bc19d39141ce05f2ccf13c1e1a162ef)**


## Вместо заключения
Думаю, что ничего не забыл. **[Перейти к третьему заданию](https://github.com/fletcherist/shri-2018-entrance-task-3)**

## Запуск
```
npm i
npm run dev
```

Для сброса данных в базе:
```
npm run reset-db
```
